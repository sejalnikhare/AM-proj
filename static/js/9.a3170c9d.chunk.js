(this["webpackJsonpassignment-am"]=this["webpackJsonpassignment-am"]||[]).push([[9],{704:function(e,t,a){"use strict";a.r(t);var n=a(39),i=a(0),o=a.n(i),c=a(372),s=a.n(c),l=a(624),r=a.n(l).a.create({baseURL:"http://127.0.0.1:2497/api/v1"}),d=a(129),u=a(132),b=a(655),m=a.n(b),j=a(343),p=a.n(j),f=a(12),h=a(46),O=a(696),x=a(700),v=a(698),g=a(699),C=a(697),y=a(362),N=a(360),I=a(134),U=a(282),k=a(358),B=a(701),S=a(352),L=a.n(S),A=a(656),T=a(2),w=Object(A.a)("input")({display:"none"}),E=Object(d.a)((function(e){return{formControl:{margin:e.spacing(1),minWidth:120},selectEmpty:{marginTop:e.spacing(2)}}})),F=function(e){var t=e.open,a=e.setOpen,c=e.operation,s=e.user,l=e.setUser,d=e.loadUsers,b=E(),m=Object(i.useState)({firstname:"",lastname:"",occupation:"",dob:""}),j=Object(n.a)(m,2),p=j[0],S=j[1],A=function(){a(!1)},F=function(e){var t=e.target,a=t.name,n=t.value;l(Object(h.a)(Object(h.a)({},s),{},Object(f.a)({},a,n)))};Object(i.useEffect)((function(){s.firstname.length>3?S(Object(h.a)(Object(h.a)({},p),{},{name:!1})):S(Object(h.a)(Object(h.a)({},p),{},{name:!0})),s.lastname.length>4?S(Object(h.a)(Object(h.a)({},p),{},{name:!1})):S(Object(h.a)(Object(h.a)({},p),{},{name:!0}))}),[s]);var R=o.a.useRef(null);return o.a.useEffect((function(){if(t){var e=R.current;null!==e&&e.focus()}}),[t]),Object(T.jsx)("div",{children:Object(T.jsxs)(O.a,{open:t,onClose:A,scroll:"paper","aria-labelledby":"scroll-dialog-title","aria-describedby":"scroll-dialog-description",children:[Object(T.jsxs)(C.a,{id:"scroll-dialog-title",children:[" ","edit"===c?"Update":"Add"," Customers"]}),Object(T.jsx)(v.a,{dividers:!0,children:Object(T.jsx)(g.a,{id:"scroll-dialog-description",ref:R,tabIndex:-1,children:Object(T.jsxs)("form",{children:[Object(T.jsx)(y.a,{name:"firstname",fullWidth:!0,onChange:F,value:s.firstname,id:"outlined-basic",className:b.formControl,label:"First Name",variant:"outlined",error:p.name,helperText:p.firstname?"First Name is required":""}),Object(T.jsx)(y.a,{name:"lastname",fullWidth:!0,onChange:F,value:s.lastname,id:"outlined-basic",className:b.formControl,label:"Last Name",variant:"outlined",error:p.name,helperText:p.lastname?"Last Name is required":""}),Object(T.jsxs)(U.a,{variant:"outlined",fullWidth:!0,className:b.formControl,children:[Object(T.jsx)(N.a,{id:"demo-simple-select-outlined-label",children:"occupation"}),Object(T.jsxs)(k.a,{labelId:"demo-simple-select-outlined-label",id:"demo-simple-select-outlined",value:s.occupation,onChange:F,label:"Occupation",name:"occupation",children:[Object(T.jsx)(I.a,{value:"employed",children:"Employed"}),Object(T.jsx)(I.a,{value:"business",children:"Business"}),Object(T.jsx)(I.a,{value:"student",children:"Student"})]})]}),Object(T.jsx)(B.a,{component:"form",noValidate:!0,spacing:3,children:Object(T.jsx)(y.a,{name:"dob",id:"date",label:"DOB",type:"date",value:s.dob,onChange:F,InputLabelProps:{shrink:!0}})}),Object(T.jsxs)(U.a,{fullWidth:!0,variant:"outlined",className:b.formControl,children:[Object(T.jsx)(N.a,{id:"demo-simple-select-outlined-label",children:"Status"}),Object(T.jsxs)(k.a,{labelId:"demo-simple-select-outlined-label",id:"demo-simple-select-outlined",value:s.status,onChange:F,name:"status",label:"Status",children:[Object(T.jsx)(I.a,{value:1,children:"Active"}),Object(T.jsx)(I.a,{value:0,children:"Inactive"})]})]}),Object(T.jsx)(y.a,{name:"bio",id:"outlined-multiline-static",label:"BIO",multiline:!0,rows:5,value:s.bio,placeholder:"BIO",onChange:F}),Object(T.jsxs)("label",{htmlFor:"contained-button-file",children:[Object(T.jsx)(w,{accept:"image/*",id:"contained-button-file",onChange:F,name:"profilepic",multiple:!0,type:"file"}),Object(T.jsx)(u.a,{variant:"contained",component:"span",value:s.profilepic,children:"Upload"})]})]})})}),Object(T.jsxs)(x.a,{children:[Object(T.jsx)(u.a,{onClick:A,color:"primary",children:"Cancel "}),Object(T.jsx)(u.a,{variant:"contained",onClick:function(e){e.preventDefault(),console.log("User: ",s),"add"===c?r.post("/user",s).then((function(e){a(!1),L.a.fire("User created","","success"),d()})).catch((function(e){L.a.fire("User not created","please try again","error")})):"edit"===c?r.put("/user/".concat(s._id),{firstname:s.firstname,lastname:s.lastname,occupation:s.occupation,dob:s.dob,status:s.status,bio:s.bio,profilepic:s.profilepic}).then((function(e){a(!1),d(),L.a.fire("User updated","","success")})).catch((function(e){L.a.fire("User not updated","please try again","error")})):L.a.fire("Something wrong","please try again later","error")},color:"primary",children:"edit"===c?"Update":"Add"})]})]})})},R=Object(d.a)((function(e){return{editIcon:{marginRight:5,color:"#3f51b5",cursor:"pointer"},deleteIcon:{color:"red",cursor:"pointer"}}}));t.default=function(){var e=R(),t=Object(i.useState)([]),a=Object(n.a)(t,2),c=a[0],l=a[1],d=o.a.useState(!1),b=Object(n.a)(d,2),j=b[0],f=b[1],h=o.a.useState("add"),O=Object(n.a)(h,2),x=O[0],v=O[1],g=Object(i.useState)({firstname:"",lastname:"",occupation:"employed",dob:"",status:1,bio:"",profilepic:""}),C=Object(n.a)(g,2),y=C[0],N=C[1],I=function(){r.get("/user").then((function(e){l(e.data.data)})).catch((function(e){console.log(e)}))};Object(i.useEffect)((function(){I()}),[]);var U=[{name:"firstname",label:"First Name",options:{filter:!0,sort:!0}},{name:"lastname",label:"Last Name",options:{filter:!0,sort:!0}},{name:"occupation",label:"Occupation",options:{filter:!0,sort:!0}},{name:"status",label:"Status",options:{filter:!0,sort:!1,customBodyRenderLite:function(e){return 1===c[e].status?"Active":"Inactive"}}},{name:"bio",label:"Bio",options:{filter:!0,sort:!0}},{name:"profilepic",label:"Profile Picture / Avatar",options:{filter:!0,sort:!0}},{name:"action",label:"Action",options:{filter:!0,sort:!1,customBodyRenderLite:function(t){return Object(T.jsxs)("div",{children:[Object(T.jsx)("span",{className:e.editIcon,onClick:function(){return N(c[t]),v("edit"),void f(!0)},children:Object(T.jsx)(m.a,{})}),Object(T.jsx)("span",{className:e.deleteIcon,onClick:function(){return e=t,void L.a.fire({title:"Are you sure?",text:"You will not be able to recover this record!",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, delete it!",cancelButtonText:"No, keep it"}).then((function(t){t.value&&r.delete("/user/".concat(c[e]._id)).then((function(e){L.a.fire("Deleted!","The customer has been deleted.","success"),I()})).catch((function(e){L.a.fire("Not Deleted!","The customer has not been deleted.","error")}))}));var e},children:Object(T.jsx)(p.a,{})})]})}}}];return Object(T.jsxs)(T.Fragment,{children:[Object(T.jsx)(F,{open:j,setOpen:f,operation:x,user:y,setUser:N,loadUsers:I}),Object(T.jsx)("h1",{children:"Customers LIst "}),Object(T.jsx)(u.a,{variant:"contained",color:"primary",onClick:function(){N({firstname:"",lastname:"",occupation:"employed",dob:"",status:1,bio:"",profilepic:""}),v("add"),f(!0)},children:"Add Customers"}),Object(T.jsx)(s.a,{title:"Customers List",data:c,columns:U,options:{filterType:"checkbox"}})]})}}}]);
//# sourceMappingURL=9.a3170c9d.chunk.js.map